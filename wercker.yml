box: golang

dev:
 steps:
  - setup-go-workspace:
     package-dir: github.com/amccarthy/hello

  - script:
     name: env
     code: env

  - script:
     name: go get
     code: |
      cd $WERCKER_SOURCE_DIR
      go version
      go get -u github.com/Masterminds/glide
      export PATH=$WERCKER_SOURCE_DIR/bin:$PATH
      glide install

  - internal/watch:
     code: go run main.go
     reload: true

build:
 steps:
  - setup-go-workspace:
     package-dir:github.com/amccarthy/hello

  - scripts:
     name: env
     code: env

  - script:
     name: go get
     code: |
      cd $WERCKER_SOURCE_DIR
      go version
      go get -u github.com/Masterminds/glide
      export PATH=$WERCKER_SOURCE_DIR/bin:$PATH
      glide install 

  - script:
     name: go build
     code: |
      go build


  - script:
     name: copy files to wercker output
     code: |
      cp -R ./ ${WERCKER_OUTPUR_DIR}




